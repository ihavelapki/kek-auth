DROP TABLE IF EXISTS users;
--DROP TABLE IF EXISTS comments;
DROP TABLE IF EXISTS roles;
--DROP TABLE IF EXISTS groups;
--DROP TABLE IF EXISTS schedule;
DROP TABLE IF EXISTS user_x_role;


CREATE TABLE users (id INTEGER PRIMARY KEY AUTOINCREMENT
    , email VARCHAR(100)
    , name VARCHAR(100)
    , avatar VARCHAR(100)
    , process_date DATE NOT NULL DEFAULT CURRENT_DATE
    , process_dtime TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
    , password_hash VARCHAR(100));

CREATE TABLE roles (id INTEGER PRIMARY KEY AUTOINCREMENT
    , process_dtime TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
    , role_name VARCHAR(20) NOT NULL);

CREATE TABLE user_x_role (id INTEGER PRIMARY KEY AUTOINCREMENT
    , user_id INTEGER
    , role_id INTEGER
    , start_dttm TIMESTAMP NOT NULL
    , end_dttm TIMESTAMP NOT NULL
    , process_dtime TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
    , FOREIGN KEY (user_id) REFERENCES users (id)
    , FOREIGN KEY (role_id) REFERENCES roles (id)
);
